<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Mandrake- GnuMed on Mandrake 9.1</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="GNUMed"
HREF="index.html"><LINK
REL="UP"
TITLE="Installation"
HREF="installation.html"><LINK
REL="PREVIOUS"
TITLE="Debian specific requirements"
HREF="debian.html"><LINK
REL="NEXT"
TITLE="Mac - GnuMED on MacOSX 10.2"
HREF="mac.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>GNUMed: User's Manual</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="debian.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 2. Installation</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="mac.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="MANDRAKE"
>2.4. Mandrake- GnuMed on Mandrake 9.1</A
></H1
><P
>GnuMed Install Instructions for Mandrake Linux 9.1
by Michael Bonert</P
><P
><CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:michael.bonert@utoronto.ca"
>michael.bonert@utoronto.ca</A
>&#62;</CODE
></P
><P
>Wed Apr  2 00:17:07 EST 2003</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN327"
>2.4.1. Package Installation</A
></H2
><P
></P
><OL
TYPE="1"
><LI
><P
>		  Install CVS (from the Mandrake CDs):
		  cvs-1.11.5-1mdk</P
></LI
><LI
><P
>			Install postgresql (from the Mandrake CDs):
			<A
NAME="AEN334"
HREF="#FTN.AEN334"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
>
	     	</P
></LI
><LI
><P
>        Install Postgresql-7.3:
        </P
><P
></P
><UL
><LI
><P
>			postgresql-7.3.2-5mdk</P
></LI
><LI
><P
>			postgresql-devel-7.3.2-5mdk</P
></LI
><LI
><P
>			postgresql-python-7.3.2-5mdk</P
></LI
><LI
><P
>			postgresql-server-7.3.2-5mdk</P
></LI
><LI
><P
>			postgresql-pl-7.3.2-5mdk</P
></LI
><LI
><P
>			pgaccess-0.98.8.20030117-2mdk		# nice to have</P
></LI
><LI
><P
>			postgresql-docs-7.3.2-5mdk		# nice to have</P
></LI
></UL
></LI
><LI
><P
>			Install wxPython -- (version used: wxPythonGTK-py2.2-2.4.0.1-1.i386.rpm)</P
></LI
><LI
><P
>			Install mx extenstion libraries -- (egenix-mx-base-2.0.4-py2.2_1.i386.rpm)</P
></LI
><LI
><P
>			Install pyPgSQL</P
><P
>	        This package can be installed either from source or from a RPM.
	        Email me (bonerti AT mie DOT utoronto DOT ca) for the RPM.</P
><P
></P
><UL
><LI
><P
>	            If you install the RMP:
		         </P
><P
>	             Before installing pyPgSQL make sure you have the following
	             (from the Mandrake CDs): 
                 </P
><P
><EM
>	             libpython2.2-devel-2.2.2-6mdk
                </EM
></P
><P
>	             Install the rpm and check that everything went right:
                 </P
><P
>			    <TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ su root
# su postgres		# trick to avoid having to know the postgres passwd
$ cd /usr/share/doc/pyPgSQL-2.3/test
$ python PgSQLTestCases.py

this should print:

	..................................................................
	----------------------------------------------------------------------
	Ran 66 tests in 1.090s

	OK
		    </PRE
></FONT
></TD
></TR
></TABLE
>

				  </P
><P
>				IMPORTANT NOTE:
			    </P
><P
>				A database user with your user name has to exist for the test to work
	            properly if you are testing as a normal user.  See step #10
	            for how	to create database users.
	            </P
></LI
><LI
><P
>                If you would like to install from sources:
                </P
><P
>	            Before building and installing pyPgSQL make sure you have the following
	            (from the Mandrake CDs):<EM
>	            libpython2.2-devel-2.2.2-6mdk</EM
></P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ tar zxvf pyPgSQL-2.3.tar.gz<A
NAME="AEN376"
HREF="#FTN.AEN376"
><SPAN
CLASS="footnote"
>[2]</SPAN
></A
>
$ cd pypgsql
				 </PRE
></FONT
></TD
></TR
></TABLE
><P
>            Set include and library directories in "setup.py" with your favourite editor:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># Set this to 1 if you need to use your own settings
USE_CUSTOM = 1
                  <A
NAME="AEN380"
HREF="#FTN.AEN380"
><SPAN
CLASS="footnote"
>[3]</SPAN
></A
>
            ...

if USE_CUSTOM:
    include_dirs = ["/usr/include/pgsql"]
    library_dirs = ["/usr/lib/pgsql"]</PRE
></FONT
></TD
></TR
></TABLE
><P
>      Now build pyPgSQL and install it:
      </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ python setup.py build
	    $ python setup.py install
        <A
NAME="AEN384"
HREF="#FTN.AEN384"
><SPAN
CLASS="footnote"
>[4]</SPAN
></A
>
        
      </PRE
></FONT
></TD
></TR
></TABLE
><P
>Testing pyPgSQL:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ cd test<A
NAME="AEN388"
HREF="#FTN.AEN388"
><SPAN
CLASS="footnote"
>[5]</SPAN
></A
>
$ python PgSQLTestCases.py

 this should print:

	..................................................................
	----------------------------------------------------------------------
	Ran 66 tests in 1.090s

	OK
	    	</PRE
></FONT
></TD
></TR
></TABLE
></LI
></UL
></LI
></OL
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN390"
>2.4.2. Get GnuMed source</A
></H2
><P
>RECOMMENDATION: install gnumed in "/home/your_user_name/"
	-- where 'your_user_name' is your favourite normal user - e.g. 'michael'
	  </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ export CVS_RSH="ssh"
$ cvs -z3 -d:ext:anoncvs@subversions.gnu.org:/cvsroot/gnumed checkout gnumed
	  </PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN394"
>2.4.3. Modify postgresql.conf</A
></H2
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ su
# cd /var/lib/pgsql/data
# vi postgresql.conf<A
NAME="AEN397"
HREF="#FTN.AEN397"
><SPAN
CLASS="footnote"
>[6]</SPAN
></A
></PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN399"
>2.4.4. Modify "pg_hba.conf" found in
	  "/var/lib/pgsql/data"</A
></H2
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># vi pg_hba.conf</PRE
></FONT
></TD
></TR
></TABLE
><P
>last part of our "pg_hba.conf" should look like this:
	    <TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># Using sockets credentials for improved security. Not available everywhere,
# but works on Linux, *BSD (and probably some others)

#local  all     all     ident   sameuser
local   all         all                                             trust
host    all         all         127.0.0.1         255.255.255.255   trust
	    </PRE
></FONT
></TD
></TR
></TABLE
>
	  </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN404"
>2.4.5. Create db</A
></H2
><P
>(see -- http://mail.gnu.org/archive/html/gnumed-devel/2003-02/msg00079.html)</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ su root
	    # passwd postgres<A
NAME="AEN408"
HREF="#FTN.AEN408"
><SPAN
CLASS="footnote"
>[7]</SPAN
></A
></PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.gif"
HSPACE="5"
ALT="Caution"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
># you'll need this password later so remember it.</P
></TD
></TR
></TABLE
></DIV
><P
>If you wish to create a user for gnumed please change 
      <TT
CLASS="FILENAME"
>sql/gmTestAccounts.sql</TT
>. Creating them at the command
      line is not recommended.</P
><P
>	  Now change back to your normal account and bootstrap the gnumed database.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ cd /home/your_user_name/gnumed/gnumed/server/bootstrap
$ cp bootstrap-standard-AU.conf.sample your_user_name-db.conf
$ ln -s /home/your_user_name/gnumed/gnumed/client/python-common modules
$ ln -s /home/your_user_name/gnumed/gnumed/server/sql/ sql
	  </PRE
></FONT
></TD
></TR
></TABLE
><P
>	At this point you may want to confirm that postgresql is
	running:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ mcc
	  </PRE
></FONT
></TD
></TR
></TABLE
><P
>click on 'System'</P
><P
>click on 'DrakXServices...'</P
><P
>'postgresql' should say 'running'</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ python bootstrap-gm_db_system.py
	    --conf-file=your_user_name-db.conf</PRE
></FONT
></TD
></TR
></TABLE
><P
>When prompted:
	    <P
></P
><UL
><LI
><P
>- yes</P
></LI
><LI
><P
>- give password</P
></LI
><LI
><P
>- give another password</P
></LI
></UL
></P
><P
><EM
>NOTE: If you have problems the log file is in: "/home/your_user_name/.bootstrap-gm_db_system"
	    </EM
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN432"
>2.4.6. Set 'GNUMED_DIR' variable</A
></H2
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ cd 			# cd to home
$ vi .bash_profile	# or your favourite text editor
	  </PRE
></FONT
></TD
></TR
></TABLE
><P
>Add the following:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>GNUMED_DIR=$GNUMED_DIR/home/your_user_name/gnumed/gnumed/client
	  </PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN437"
>2.4.7. Running GnuMed:</A
></H2
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ cd /home/your_user_name/gnumed/gnumed/client/wxpython
$ python gnumed.py --debug
	  </PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><H3
CLASS="FOOTNOTES"
>Notes</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN334"
HREF="mandrake.html#AEN334"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>	            NOTE: If the packages all show up when you do a
	            'remove software packages' (in 'mcc') they are all
	            installed.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN376"
HREF="mandrake.html#AEN376"
><SPAN
CLASS="footnote"
>[2]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>gunzip + untar 'pyPgSQL-2.3.tar.gz'</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN380"
HREF="mandrake.html#AEN380"
><SPAN
CLASS="footnote"
>[3]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>					Don't forget to change this line!!!
				 </P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN384"
HREF="mandrake.html#AEN384"
><SPAN
CLASS="footnote"
>[4]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>NOTE: If the directory settings in 'setup.py' are wrong you will 
get a misleading error about 'gcc'
		</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN388"
HREF="mandrake.html#AEN388"
><SPAN
CLASS="footnote"
>[5]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>install directory: ../pypgsql/test</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN397"
HREF="mandrake.html#AEN397"
><SPAN
CLASS="footnote"
>[6]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>change '#tcpip_socket=false' to 'tcpip_socket=on'</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN408"
HREF="mandrake.html#AEN408"
><SPAN
CLASS="footnote"
>[7]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
># change password (I don't know what the default is</P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="debian.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="mac.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Debian specific requirements</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="installation.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Mac - GnuMED on MacOSX 10.2</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>