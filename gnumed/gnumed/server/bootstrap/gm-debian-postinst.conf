# GnuMed database system bootstrapping config file
#-------------------------------------------------
# license: GPL
# author: Karsten Hilbert@gmx.net

#----------------------------------
[revision control]
file = $Source: /home/ncq/Projekte/cvs2git/vcs-mirror/gnumed/gnumed/server/bootstrap/Attic/gm-debian-postinst.conf,v $
version = $Revision: 1.30 $

#----------------------------------
[installation]

interactive = no

keep temp files = no

description = $description$
This will set up a standard monolithic test system for GnuMed
that is immediately useable. It will contain patient demographics,
clinical tables, german translations and some sample data and
is intended for the Debian postinst script. Therefore it is
non-interactive and may contain passwords.

It will also have some test accounts for access to the database.
Please refer to server/sql/gmTestAccounts.sql to learn more
about those. YOU MUST make sure to remove them prior to going
life on a production system because they currently apply to
ALL databases.

The database name will be "gnumed-test" which is expected
to not exist prior to running this script.
$description$

services = $services$
config
reference
demographics
clinical
documents
office
$services$

#----------------------------------
# services
#----------------------------------
[service config]
name = default
version = 0.1
database alias = core
minimum postgresql version = 7.3
registration database = core
schema base directory = /var/lib/postgres/sql/
schema = $schema$
gmconfiguration.sql
gmConfigData.sql
gmConfigViews.sql
$schema$


[service demographics]
name = personalia
version = 0.1
database alias = core
minimum postgresql version = 7.3
registration database = core

schema base directory = /var/lib/postgres/sql/
schema = $schema$
gmDemographics.sql
gmDemographics-Grants.sql
gmDemographics-Person-views.sql
gmDemographics-Person-data.sql
gmDemographics-GIS-views.sql
gmDemographics-GIS-data.sql
gmDemographics-Org-views.sql
$schema$


[service clinical]
name = historica
version = 0.1
database alias = core
minimum postgresql version = 7.3
registration database = core
schema base directory = /var/lib/postgres/sql/

schema = $schema$
gmclinical.sql
gmMeasurements.sql
gmClinicalViews.sql
gmClinicalData.sql
$schema$


[service documents]
name = blobs
version = 0.1
database alias = core
minimum postgresql version = 7.3
registration database = core
schema base directory = /var/lib/postgres/sql/
schema = $schema$
gmBlobs.sql
gmBlobsData.sql
gmBlobViews.sql
$schema$


[service reference]
name = reference
version = 0.1
database alias = core
minimum postgresql version = 7.3
registration database = core
schema base directory = /var/lib/postgres/sql/
schema = $schema$
gmReference.sql
gmReference-data.sql
$schema$


[service office]
name = administrivia
version = 0.1
database alias = core
minimum postgresql version = 7.3
registration database = core
schema base directory = /var/lib/postgres/sql/
schema = $schema$
gmoffice.sql
gmOfficeData.sql
$schema$

#----------------------------------
# databases
#----------------------------------
[database core]
name = gnumed-test
override name by = GM_CORE_DB
server alias = local host
audit disable = 0
audit trail parent table = audit_trail
audit trail table prefix = log_
audit fields table = audit_fields
scoring disable = 0
scoring table prefix = score_
scoring fields table = scoring_fields
schema base directory = /var/lib/postgres/sql/
schema = $schema$
gmSchemaRevision.sql
gmServices.sql
gmI18N.sql
gmAudit.sql
gmCrossDB_FKs.sql
gmCrossDB_FK-views.sql
gmScoring.sql
gmNotifications.sql
gmHousekeeping.sql
$schema$

#----------------------------------
# servers
#----------------------------------
[server local host]
name = localhost
port = 5432
template database = template1
super user alias = postgres
procedural language library check = yes
schema base directory = /var/lib/postgres/sql/
schema = $schema$
gmTestAccounts.sql
$schema$

#----------------------------------
# users
#----------------------------------
[user GnuMed owner]
name = gm-dbo
password = 

[user postgres]
name = postgres
password = blank

#----------------------------------------------
# the following sections really shouldn't
# be changed unless you know what you are doing
#----------------------------------------------
[GnuMed defaults]

database owner alias = GnuMed owner

groups = $groups$
gm-doctors
gm-staff_medical
gm-staff_office
gm-trainees_medical
gm-trainees_office
gm-public
$groups$

procedural languages = $procedural languages$
pg/SQL
$procedural languages$

language library dirs = $language library dirs$
/usr/lib/postgresql/
/usr/lib/postgresql/lib/
/usr/lib/pgsql/
/usr/local/pgsql/lib
$language library dirs$

#----------------------------------
# languages
#----------------------------------
[pg/SQL]
library name = plpgsql.so
library dir = 

call handler = $call handler$
CREATE FUNCTION plpgsql_call_handler () RETURNS OPAQUE AS '%s' LANGUAGE 'C';
$call handler$

language activation = $language activation$
CREATE TRUSTED PROCEDURAL LANGUAGE 'plpgsql' HANDLER plpgsql_call_handler LANCOMPILER 'PL/pgSQL';
$language activation$


[pg/Python]
library name = plpython.so
library dir = 

call handler = $call handler$
CREATE FUNCTION plpython_call_handler () RETURNS OPAQUE AS '%s' LANGUAGE 'C';
$call handler$

language activation = $language activation$
CREATE TRUSTED PROCEDURAL LANGUAGE 'plpython' HANDLER plpython_call_handler;
$language activation$

#----------------------------------
# $Log: gm-debian-postinst.conf,v $
# Revision 1.30  2005-06-01 23:17:43  ncq
# - support overriding target database name via environment variable
#
# Revision 1.29  2005/01/12 14:47:49  ncq
# - in DB speak the database owner is customarily called dbo, hence use that
#
# Revision 1.28  2004/11/24 15:36:31  ncq
# - add option "keep temp files"
#
# Revision 1.27  2004/11/07 11:47:57  ncq
# - update services defs
#
# Revision 1.26  2004/07/17 20:57:53  ncq
# - don't use user/_user workaround anymore as we dropped supporting
#   it (but we did NOT drop supporting readonly connections on > 7.3)
#
# Revision 1.25  2004/03/15 22:59:34  ncq
# - schema base dir
#
# Revision 1.24  2004/03/14 22:32:04  ncq
# - postgres version -> minimum postgresql version
#
# Revision 1.23  2004/03/02 10:22:30  ihaywood
# support for martial status and occupations
# .conf files now use host autoprobing
#
# Revision 1.22  2003/11/28 08:49:40  ncq
# - add gmNotifications.sql
#
# Revision 1.21  2003/11/05 23:51:22  ncq
# - apply Andreas' changes
#
# Revision 1.20  2003/11/03 22:26:38  ncq
# - force localhost/socket connections by leaving the host name empty
#
# Revision 1.19  2003/11/02 12:48:55  ncq
# - add schema base directory option to config files
# - hence we don't need the sql link anymore
#
# Revision 1.18  2003/10/31 23:24:32  ncq
# - include more test data
#
# Revision 1.17  2003/10/19 12:57:19  ncq
# - add scoring schema generator and use it
#
# Revision 1.16  2003/10/01 15:59:20  ncq
# - remove now-obsolete audit_mark defines
#
# Revision 1.15  2003/08/26 14:11:13  ncq
# - add option to disable checking for proc lang library files on remote machines
#
# Revision 1.14  2003/08/26 13:05:04  ncq
# - add "audit disable" flag
#
# Revision 1.13  2003/08/17 18:06:36  ncq
# - add x_db_fk views
#
# Revision 1.12  2003/08/17 00:06:37  ncq
# - add def for audit fields table
#
# Revision 1.11  2003/08/03 14:04:10  ncq
# - import measurements before views now
#
# Revision 1.10  2003/08/02 14:33:48  ncq
# - adapted to gmDemographics*.sql
#
# Revision 1.9  2003/07/27 21:45:16  ncq
# - add gmMeasurements and gmCrossDB_FKs
#
# Revision 1.8  2003/06/19 16:09:20  ncq
# - Debian wants PG version 7.3
#
# Revision 1.7  2003/06/10 11:25:20  ncq
# - audit for up-to-date-ness
#
# Revision 1.6  2003/05/22 12:53:41  ncq
# - add automatic audit trail generation
# - add options for that
#
# Revision 1.5  2003/05/14 07:27:54  ncq
# - add gmAudit.sql to database level schema
#
# Revision 1.4  2003/05/12 12:47:25  ncq
# - import some schema files at the database level, too
# - add corresponding schema list in the config files
#
# Revision 1.3  2003/04/28 20:47:15  ncq
# - factored out gmClinicalViews.sql
#
# Revision 1.2  2003/04/18 13:21:16  ncq
# - include new script gmIdentityViews.sql
#
# Revision 1.1  2003/03/30 22:18:53  ncq
# - renamed after discussion with native speaker :-)
#
# Revision 1.3  2003/03/30 20:57:37  ncq
# - make localhost be 127.0.0.1 as Mandrake happens to want to rename that to the local hostname :-)
#
# Revision 1.2  2003/03/26 15:47:54  ncq
# - alas, some distros store procedural language libraries in /usr/lib/postgresql/
#
# Revision 1.1  2003/02/25 08:26:49  ncq
# - moved here from server/utils/
#
# Revision 1.6  2003/02/23 19:13:08  ncq
# - move language library dirs to [GnuMed defaults] and that to
#   the bottom of the file as per suggestion by Andreas
#
# Revision 1.5  2003/02/09 11:46:11  ncq
# - added core database option for registering services
# - convenience function _run_query()
#
# Revision 1.4  2003/01/30 09:01:38  ncq
# - german-clinical -> german-gmclinical
#
# Revision 1.3  2003/01/28 13:39:14  ncq
# - implemented schema import at the server level (= template database)
# - this is mainly useful for importing users
#
# Revision 1.2  2003/01/28 09:37:22  ncq
# - moved unchanging defaults to bottom of file
#
# Revision 1.1  2003/01/28 09:34:11  ncq
# - for Debian to play around with
#
# Revision 1.2  2003/01/27 01:48:03  ncq
# - updated to be more complete, added description
#
# Revision 1.1  2003/01/26 12:47:17  ncq
# - next generation from test-area/
#
# Revision 1.1  2003/01/22 22:50:36  ncq
# - example of minimal monolithic database on localhost
#
